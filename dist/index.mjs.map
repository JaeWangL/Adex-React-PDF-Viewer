{"version":3,"sources":["../src/AdexViewer.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { Document, Page } from \"react-pdf\";\r\nimport { pdfjs } from \"react-pdf\";\r\nimport \"./index.css\";\r\n\r\n\r\n\r\n// Set worker source for pdf.js\r\npdfjs.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\ninterface PDFViewerProps {\r\n  data: { url: string }\r\n  credits?: boolean | null\r\n}\r\n\r\nconst AdexViewer: React.FC<PDFViewerProps> = ({ data, credits }) => {\r\n\r\n  const scaleSets = [0.5, 0.75, 1, 1.25, 1.5, 2, 3];\r\n  const [numPages, setNumPages] = useState<number | null>(null);\r\n  const [pageNumber, setPageNumber] = useState<number>(1);\r\n  const [scale, setScale] = useState<number>(1.25);\r\n  const [pdfBlobUrl, setPdfBlobUrl] = useState<string | null>(null);\r\n  const [fullScreenView, setFullScreenView] = useState<boolean>(false);\r\n  const [sidebar, setSidebar] = useState<boolean>(true);\r\n  const [previewNumber, setPreviewNumber] = useState<number>(pageNumber);\r\n  const [retryCount, setRetryCount] = useState<number>(0);\r\n  const [retryTimeoutDelay, setRetryTimeoutDelay] = useState<number>(5);\r\n  const viewerRef = useRef<HTMLDivElement>(null);\r\n  const pageRefs = useRef<{ [key: number]: HTMLDivElement | null }>({});\r\n  const previewRef = useRef<HTMLDivElement>(null);\r\n  const showCredits = credits ?? true;\r\n  const [metadata, setMetadata] = useState<any>(null);\r\n  const [showInfo,setShowInfo] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    let retryTimer: ReturnType<typeof setTimeout> | null = null;\r\n\r\n    const fetchPdfBlob = async () => {\r\n      try {\r\n        const response = await fetch(data?.url);\r\n        if (!response.ok) throw new Error(\"Failed to fetch PDF\");\r\n\r\n        const blob = await response.blob();\r\n        const url = URL.createObjectURL(blob);\r\n        setPdfBlobUrl(url);\r\n        setRetryCount(0); // Reset retry count on success\r\n\r\n        //remove if existing timeout exist\r\n        if (retryTimer) {\r\n          clearTimeout(retryTimer); // Clear any pending retry\r\n          retryTimer = null;\r\n        }\r\n      } catch (error) {\r\n        console.error(`Failed to load PDF (Attempt ${retryCount + 1}):`, error);\r\n        if (retryCount < 5) {\r\n          retryTimer = setTimeout(() => {\r\n            setRetryCount(retryCount + 1);\r\n          }, retryTimeoutDelay); //retry every 30 seconds\r\n          setRetryTimeoutDelay(retryTimeoutDelay * 2);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (data?.url) fetchPdfBlob();\r\n\r\n    return () => {\r\n      if (pdfBlobUrl) URL.revokeObjectURL(pdfBlobUrl);\r\n      if (retryTimer) clearTimeout(retryTimer);\r\n    };\r\n  }, [data?.url, retryCount]);\r\n\r\n  async function onDocumentLoadSuccess(pdf:any) {\r\n    setNumPages(pdf.numPages);\r\n    const meta = await pdf.getMetadata();\r\n    setMetadata(meta.info);\r\n  }\r\n\r\n  const goToPage = useCallback(\r\n    (pageNum:number) => {\r\n      setPreviewNumber(pageNum);\r\n      setPageNumber(pageNum);\r\n      const pageEl = pageRefs.current[pageNum];\r\n      if (pageEl) {\r\n        pageEl.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n      }\r\n    },\r\n    [setPageNumber]\r\n  );\r\n\r\n  function updatePage(__page:number) {\r\n    //@ts-ignore\r\n    if (__page > 0 && __page <= numPages) {\r\n      goToPage(__page), 500;\r\n    } else {\r\n      setPreviewNumber(pageNumber);\r\n    }\r\n  }\r\n\r\n  function updatePDFPage(e:any) {\r\n    let __page = Number(e.target.value);\r\n    setPreviewNumber(__page);\r\n    debounce(updatePage(__page), 500);\r\n  }\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      setFullScreenView(true);\r\n      viewerRef.current?.requestFullscreen();\r\n    } else {\r\n      setFullScreenView(false);\r\n      document.exitFullscreen();\r\n    }\r\n  };\r\n\r\n  const debounce = (func:any, delay:any) => {\r\n    let timeoutId:any;\r\n    return (...args:any[]) => {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => {\r\n        func(...args);\r\n      }, delay);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (!previewRef.current) return;\r\n\r\n      let closestPage: number = pageNumber;\r\n\r\n      //@ts-ignore\r\n      Object.entries(pageRefs.current).forEach(([pageNum, pageEl]) => {\r\n        if (pageEl instanceof HTMLElement) {\r\n          const { top, bottom } = pageEl.getBoundingClientRect();\r\n          // Only check pages that are close to the viewport (adjust threshold as needed)\r\n          if (top <= window.innerHeight / 2 && bottom >= 0) {\r\n            closestPage = Number(pageNum);\r\n          }\r\n        }\r\n      });\r\n      setPreviewNumber(closestPage);\r\n      setPageNumber(closestPage);\r\n    };\r\n\r\n    const debouncedHandleScroll = debounce(handleScroll, 500); // Debouncing with a delay of 100ms\r\n\r\n    const scrollContainer = previewRef.current;\r\n    if (scrollContainer) {\r\n      scrollContainer.addEventListener(\"scroll\", debouncedHandleScroll);\r\n    }\r\n\r\n    return () => {\r\n      if (scrollContainer) {\r\n        scrollContainer.removeEventListener(\"scroll\", debouncedHandleScroll);\r\n      }\r\n    };\r\n  }, [pageNumber, numPages]);\r\n\r\n\r\n  return (\r\n    <div\r\n      ref={viewerRef}\r\n      className={`PDFViewer ${\"adex-viewer\"} ${\r\n        fullScreenView && \"fullScreenView\"\r\n      } ${sidebar ? \"thumbs-slide-in\" : \"thumbs-slide-out\"} ${\r\n        \"dev-abhishekbagul\"\r\n      }`}\r\n    >\r\n      <div className={\"adex-topbar\"}>\r\n        <div className={\"adex-control-page\"}>\r\n          <button onClick={() => setSidebar(!sidebar)}>\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              fill=\"currentColor\"\r\n              className=\"bi bi-layout-text-sidebar-reverse\"\r\n              viewBox=\"0 0 16 16\"\r\n            >\r\n              <path d=\"M12.5 3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0 3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm.5 3.5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 .5-.5m-.5 2.5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z\" />\r\n              <path d=\"M16 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2zM4 1v14H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm1 0h9a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5z\" />\r\n            </svg>\r\n          </button>\r\n          <button\r\n            disabled={pageNumber <= 1}\r\n            onClick={() => goToPage(pageNumber - 1)}\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              fill=\"currentColor\"\r\n              className=\"bi bi-chevron-up\"\r\n              viewBox=\"0 0 16 16\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708z\"\r\n              />\r\n            </svg>\r\n          </button>\r\n          <p>\r\n            <input\r\n              className={\"page-number\"}\r\n              type=\"number\"\r\n              onChange={updatePDFPage}\r\n              value={previewNumber}\r\n            />{\" \"}\r\n            / {numPages || \"?\"}\r\n          </p>\r\n          <button\r\n          //@ts-ignore\r\n            disabled={pageNumber >= numPages}\r\n            onClick={() => goToPage(pageNumber + 1)}\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              fill=\"currentColor\"\r\n              className=\"bi bi-chevron-down\"\r\n              viewBox=\"0 0 16 16\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div className={\"adex-control-zoom\"}>\r\n          <select onChange={(e) => setScale(+e.target.value)} value={scale}>\r\n            {scaleSets.map((scaleLevel) => (\r\n              <option key={scaleLevel} value={scaleLevel}>\r\n                {(scaleLevel * 100).toFixed(0)}%\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className={\"adex-control-options\"}>\r\n          <button onClick={toggleFullscreen}>\r\n            {!fullScreenView ? (\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                className=\"bi bi-arrows-fullscreen\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path\r\n                  fillRule=\"evenodd\"\r\n                  d=\"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707m4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707m0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707m-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707\"\r\n                />\r\n              </svg>\r\n            ) : (\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n                fill=\"currentColor\"\r\n                className=\"bi bi-fullscreen-exit\"\r\n                viewBox=\"0 0 16 16\"\r\n              >\r\n                <path d=\"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5m5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5M0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5m10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0z\" />\r\n              </svg>\r\n            )}\r\n          </button>\r\n          <a\r\n            href={data?.url}\r\n            download=\"sample.pdf\"\r\n            className={\"open-link-btn\"}\r\n            target=\"_blank\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              fill=\"currentColor\"\r\n              className=\"bi bi-box-arrow-down\"\r\n              viewBox=\"0 0 16 16\"\r\n            >\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1z\"\r\n              />\r\n              <path\r\n                fillRule=\"evenodd\"\r\n                d=\"M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708z\"\r\n              />\r\n            </svg>\r\n          </a>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={\"adex-preview-panel\"}>\r\n        {/* Thumbnail Sidebar */}\r\n        <div className={\"adex-preview-thumbs\"}>\r\n          {pdfBlobUrl && (\r\n            <Document\r\n              file={pdfBlobUrl}\r\n              loading={\r\n                <div\r\n                  className={\"adex-thumb-loader\"}\r\n                  //@ts-ignore\r\n                  onLoadError={() => {\r\n                    //@ts-ignore\r\n                    if (retryCount < maxRetries) {\r\n                      setRetryCount((prev) => prev + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  <span className={\"thumb-loader\"}></span>\r\n                  <span className={\"thumb-loader\"}></span>\r\n                  <span className={\"thumb-loader\"}></span>\r\n                </div>\r\n              }\r\n              onLoadSuccess={onDocumentLoadSuccess}\r\n            >\r\n              {!pdfBlobUrl && (\r\n                <div className={\"adex-thumb-loader\"}>\r\n                  <span className={\"thumb-loader\"}></span>\r\n                  <span className={\"thumb-loader\"}></span>\r\n                  <span className={\"thumb-loader\"}></span>\r\n                </div>\r\n              )}\r\n              {numPages &&\r\n                Array.from({ length: numPages }, (_, index) => (\r\n                  <button\r\n                    key={`thumb-${index}`}\r\n                    className={`${\"adex-page-thumb\"} ${\r\n                      pageNumber === index + 1 ? \"active\" : \"\"\r\n                    }`}\r\n                    onClick={() => goToPage(index + 1)}\r\n                  >\r\n                    <Page\r\n                      scale={0.2}\r\n                      loading={\r\n                        <div className={\"adex-thumb-loader\"}>\r\n                          <span className={\"thumb-loader\"}></span>\r\n                        </div>\r\n                      }\r\n                      pageNumber={index + 1}\r\n                      width={600}\r\n                    />\r\n                  </button>\r\n                ))}\r\n            </Document>\r\n          )}\r\n        </div>\r\n\r\n        {/* PDF Pages */}\r\n        <div ref={previewRef} className={\"adex-preview\"}>\r\n          {pdfBlobUrl && (\r\n            <Document\r\n              file={pdfBlobUrl}\r\n              loading={\r\n                <div\r\n                  className={\"adex-preview-loader\"}\r\n                  //@ts-ignore\r\n                  onLoadError={() => {\r\n                    //@ts-ignore\r\n                    if (retryCount < maxRetries) {\r\n                      setRetryCount((prev) => prev + 1);\r\n                    }\r\n                  }}\r\n                >\r\n                  <span className={\"page-loader\"}></span>\r\n                  <span className={\"page-loader\"}></span>\r\n                </div>\r\n              }\r\n              onLoadSuccess={onDocumentLoadSuccess}\r\n            >\r\n              {!pdfBlobUrl && (\r\n                <div className={\"adex-preview-loader\"}>\r\n                  <span className={\"page-loader\"}></span>\r\n                  <span className={\"page-loader\"}></span>\r\n                </div>\r\n              )}\r\n              {numPages &&\r\n                Array.from({ length: numPages }, (_, index) => (\r\n                  <div\r\n                    key={`page-${index}`}\r\n                    ref={(el) => (pageRefs.current[index + 1] = el)}\r\n                    className={\"adex-page\"}\r\n                  >\r\n                    <Page\r\n                      loading={\r\n                        <div className={\"adex-preview-loader\"}>\r\n                          <span className={\"page-loader\"}></span>\r\n                        </div>\r\n                      }\r\n                      scale={scale}\r\n                      pageNumber={index + 1}\r\n                      width={600}\r\n                    />\r\n                  </div>\r\n                ))}\r\n            </Document>\r\n          )}\r\n        </div>\r\n\r\n        {(showInfo) && <div className=\"adex-pdf-meta-info\">\r\n          <div className=\"adex-meta-panel\">\r\n          <div className=\"adex-pdf-meta-info-header\">\r\n            <strong>  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-info-square\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n              <path d=\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0\"/>\r\n            </svg> Info: {metadata?.Title || \"N/A\"}</strong>\r\n            <button onClick={()=>{setShowInfo(false)}}>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-x-square\" viewBox=\"0 0 16 16\">\r\n                <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n                <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\r\n              </svg>\r\n            </button>\r\n          </div>\r\n          <div className=\"adex-pdf-meta-info-content\">\r\n            <ul className=\"adex-pdf-meta-info-list\">\r\n              {/* @ts-ignore */}\r\n              {Object?.entries(metadata|| {})?.map(([key, value]: [string, any]) => (\r\n                <li key={key} className=\"adex-pdf-meta-info-item\">\r\n                  <strong>{key}:</strong> {typeof value === \"object\" ? JSON.stringify(value) : value}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n          </div>\r\n        </div>}\r\n      </div>\r\n       <div className={\"adex-power-row\"}>\r\n        <div className=\"adex-left-option\">\r\n          <button onClick={()=>{setShowInfo(true)}}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-info-square\" viewBox=\"0 0 16 16\">\r\n              <path d=\"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z\"/>\r\n              <path d=\"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0\"/>\r\n            </svg>\r\n          </button>\r\n        </div> \r\n        {(showCredits) && <p>Created with <span>♥</span> by <a href=\"https://github.com/abhibagul/\" target=\"_blank\">Abhishek</a></p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdexViewer;\r\n"],"mappings":"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","names":["_a"]}